<!DOCTYPE html>
<html lang="tr">
<head>
<meta charset="UTF-8">
<title>TNOPS SYSTEM</title>

<style>
    body {
        margin: 0;
        overflow: hidden;
        background: black;
        font-family: 'Courier New', monospace;
    }

    canvas {
        position: fixed;
        top: 0; left: 0;
        width: 100%; height: 100%;
        z-index: 0;
    }

    /* HOŞGELDİNİZ */
    #welcome {
        position: absolute;
        top: 40%;
        width: 100%;
        text-align: center;
        font-size: 80px;
        color: #00ff99;
        text-shadow: 0 0 20px #00ff99, 0 0 40px #00ff99, 0 0 80px #00ff99;
        opacity: 1;
        animation: glitch 3s infinite, moveUp 4s forwards;
        z-index: 5;
    }

    /* Glitch */
    @keyframes glitch {
        0%, 100% { transform: translate(0); }
        20% { transform: translate(-3px, 2px); }
        40% { transform: translate(3px, -2px); }
        60% { transform: translate(-2px, 1px); }
        80% { transform: translate(2px, -1px); }
    }

    /* Yukarı kayma */
    @keyframes moveUp {
        0% { top: 40%; font-size: 80px; }
        100% { top: 10%; font-size: 45px; }
    }

    /* Giriş kutusu */
    #loginBox {
        position: absolute;
        top: 60%;
        left: 50%;
        transform: translate(-50%, -50%);
        width: 320px;
        padding: 25px;
        background: rgba(0,0,0,0.75);
        border: 2px solid #00ff99;
        border-radius: 12px;
        box-shadow: 0 0 20px #00ff99;
        text-align: center;
        opacity: 0;
        z-index: 10;
        animation: fadeIn 3s forwards;
        animation-delay: 2.8s;
    }

    @keyframes fadeIn { to { opacity:1; } }

    input {
        width: 90%;
        padding: 12px;
        margin: 10px 0;
        border: 1px solid #00ff99;
        background: black;
        color: #00ff99;
        font-size: 17px;
        border-radius: 5px;
    }

    button {
        width: 100%;
        padding: 10px;
        font-size: 18px;
        background: #00ff99;
        border: none;
        border-radius: 8px;
        cursor: pointer;
        box-shadow: 0 0 10px #00ff99;
    }

    button:hover { background:#00ffc9; }

    /* Hata mesajı */
    #error {
        margin-top: 10px;
        color: red;
        font-size: 15px;
        display: none;
    }
</style>
</head>

<body>

<canvas id="matrix"></canvas>

<div id="welcome">TNOPS SYSTEM</div>

<div id="loginBox">
    <input id="username" placeholder="Kullanıcı adı">
    <input id="password" type="password" placeholder="Şifre">
    <button onclick="login()">Giriş Yap</button>
    <div id="error">Hatalı giriş!</div>
</div>

<script>
/* ─────────────── MATRIX EFEKTİ ─────────────── */
const canvas=document.getElementById("matrix");
const ctx=canvas.getContext("2d");

canvas.width=window.innerWidth;
canvas.height=window.innerHeight;

const letters="TNOPS01";
const fontSize=16;
const columns=canvas.width/fontSize;
const drops=Array(Math.floor(columns)).fill(1);

function drawMatrix(){
    ctx.fillStyle="rgba(0,0,0,0.05)";
    ctx.fillRect(0,0,canvas.width,canvas.height);

    ctx.fillStyle="#00ff99";
    ctx.font=fontSize+"px monospace";

    drops.forEach((y,i)=>{
        const text=letters.charAt(Math.floor(Math.random()*letters.length));
        ctx.fillText(text,i*fontSize,y*fontSize);

        if(y*fontSize>canvas.height && Math.random()>0.975) drops[i]=0;
        drops[i]++;
    });
}
setInterval(drawMatrix,35);

/* ─────────────── VERİ TABANI (localStorage) ─────────────── */
if(!localStorage.getItem("users")){
    const defaultDB = {
        "admin": { username:"admin", password:"1234", role:"admin", online:false },
        "test":  { username:"test",  password:"1234", role:"user",  online:false }
    };
    localStorage.setItem("users", JSON.stringify(defaultDB));
}

/* ─────────────── GİRİŞ SİSTEMİ ─────────────── */
function login(){
    const user=document.getElementById("username").value.trim();
    const pass=document.getElementById("password").value.trim();

    const db = JSON.parse(localStorage.getItem("users"));

    if(db[user] && db[user].password === pass){
        db[user].online = true;
        localStorage.setItem("currentUser", user);
        localStorage.setItem("users", JSON.stringify(db));

        /* Admin mi User mı kontrol */
        if(db[user].role === "admin"){
            window.location.href = "admin_panel.html";   // PARÇA 2 bunu karşılayacak
        } else {
            window.location.href = "user_panel.html";    // PARÇA 2 bunu karşılayacak
        }
    } else {
        document.getElementById("error").style.display = "block";
    }
}
</script>

</body>
</html>
