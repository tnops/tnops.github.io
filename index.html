<!DOCTYPE html>
<html lang="tr">
<head>
<meta charset="UTF-8">
<title>TNOPS SYSTEM</title>
<style>

body {
    margin:0;
    background:#0d0d0d;
    font-family: Arial;
    color:white;
}

.centerBox {
    width:350px;
    margin:auto;
    margin-top:120px;
    background:#1a1a1a;
    padding:25px;
    border-radius:12px;
    text-align:center;
    box-shadow:0 0 15px #000;
}

input {
    width:90%;
    padding:10px;
    margin:8px 0;
    border:none;
    border-radius:8px;
    background:#222;
    color:white;
    font-size:16px;
}

button {
    width:95%;
    padding:12px;
    border:none;
    background:#0084ff;
    color:white;
    border-radius:8px;
    cursor:pointer;
    font-size:16px;
    margin-top:10px;
}
button:hover {
    background:#0a6dd9;
}

/* Panel Ortak Tasarım */
#panel {
    display:flex;
}

/* Sol Menü */
#menu {
    width:230px;
    background:#111;
    padding-top:20px;
    height:100vh;
    box-shadow:0 0 10px #000;
    display:none;
}

.menuTitle {
    font-size:18px;
    font-weight:bold;
    margin-bottom:20px;
}

.menuItem {
    padding:15px;
    text-align:left;
    padding-left:25px;
    font-size:16px;
    cursor:pointer;
    background:#111;
}
.menuItem:hover {
    background:#1a1a1a;
}

/* Panel İçerik */
#content {
    padding:30px;
    flex-grow:1;
    display:none;
}

.card {
    background:#1a1a1a;
    padding:20px;
    border-radius:10px;
    width:80%;
    margin-top:20px;
}

input.small {
    width:60%;
    padding:8px;
}

.userBox {
    padding:10px;
    margin-top:10px;
    background:#222;
    border-radius:6px;
}

</style>
</head>
<body>

<!-- LOGIN EKRANI -->
<div id="loginBox" class="centerBox">
    <h1>TNOPS SYSTEM</h1>
    <p>Giriş Yap</p>
    <input id="username" placeholder="Kullanıcı Adı">
    <input id="password" type="password" placeholder="Şifre">
    <button onclick="login()">Giriş</button>
</div>

<!-- PANEL (ADMIN + USER) -->
<div id="panel">

    <!-- SOL MENÜ -->
    <div id="menu">
        <div class="menuTitle" id="welcomeText">Hoşgeldin</div>

        <!-- Admin menüsü -->
        <div id="adminMenu" style="display:none;">
            <div class="menuItem" onclick="showPage('adminUsers')">Kullanıcı Yönetimi</div>
            <div class="menuItem" onclick="showPage('adminRoles')">Rol Değiştirme</div>
        </div>

        <!-- User menüsü -->
        <div id="userMenu" style="display:none;">
            <div class="menuItem" onclick="showPage('userProfile')">Profil</div>
        </div>

        <div class="menuItem" onclick="logout()">Çıkış Yap</div>
    </div>

    <!-- PANEL İÇERİK -->
    <div id="content">

        <!-- ADMIN → Kullanıcı Yönetimi -->
        <div id="adminUsers" class="page" style="display:none;">
            <h2>Kullanıcı Yönetimi</h2>

            <div class="card">
                <h3>Kullanıcı Ekle</h3>
                <input id="newUser" class="small" placeholder="Yeni kullanıcı adı">
                <input id="newPass" class="small" placeholder="Şifre">
                <button style="width:200px;" onclick="addUser()">Ekle</button>
            </div>

            <div class="card">
                <h3>Mevcut Kullanıcılar</h3>
                <div id="userList"></div>
            </div>
        </div>

        <!-- ADMIN → Rol değiştirme -->
        <div id="adminRoles" class="page" style="display:none;">
            <h2>Rol Yönetimi</h2>

            <div class="card">
                <div id="roleList"></div>
            </div>
        </div>

        <!-- USER PANELİ -->
        <div id="userProfile" class="page" style="display:none;">
            <h2>Profil Bilgileri</h2>
            <div class="card">
                <p><b>Kullanıcı Adı:</b> <span id="profileName"></span></p>
                <p><b>Rol:</b> <span id="profileRole"></span></p>
                <p><b>Durum:</b> Online</p>
            </div>
        </div>

    </div>
</div>

<script>
// Sözde veritabanı
let users = {
    "admin": { password: "1234", role: "admin" },
    "deneme": { password: "1234", role: "user" }
};

let activeUser = null;

// Giriş Sistemi
function login() {
    let u = username.value.trim();
    let p = password.value.trim();

    if (!users[u] || users[u].password !== p) {
        alert("Hatalı giriş!");
        return;
    }

    activeUser = u;
    openPanel();
}

function openPanel() {
    loginBox.style.display = "none";
    panel.style.display = "flex";
    menu.style.display = "block";
    content.style.display = "block";

    welcomeText.innerText = activeUser + " (" + users[activeUser].role + ")";

    if (users[activeUser].role === "admin") {
        adminMenu.style.display = "block";
        userMenu.style.display = "none";
        showPage("adminUsers");
        refreshUsers();
        refreshRoles();
    } else {
        adminMenu.style.display = "none";
        userMenu.style.display = "block";
        showPage("userProfile");
        profileName.innerText = activeUser;
        profileRole.innerText = users[activeUser].role;
    }
}

function showPage(id) {
    document.querySelectorAll(".page").forEach(p => p.style.display = "none");
    document.getElementById(id).style.display = "block";
}

// Kullanıcı ekle
function addUser() {
    let u = newUser.value.trim();
    let p = newPass.value.trim();

    if (!u || !p) { alert("Boş bırakılamaz."); return; }
    if (users[u]) { alert("Bu kullanıcı zaten var."); return; }

    users[u] = { password: p, role: "user" };
    newUser.value = "";
    newPass.value = "";

    refreshUsers();
    refreshRoles();
}

// Kullanıcı listele
function refreshUsers() {
    userList.innerHTML = "";
    Object.keys(users).forEach(u => {
        userList.innerHTML += `
            <div class="userBox">
                ${u} (${users[u].role})
                <button style="width:80px; float:right;" onclick="deleteUser('${u}')">Sil</button>
            </div>
        `;
    });
}

// Kullanıcı sil
function deleteUser(u) {
    if (u === "admin") { alert("Admin silinemez!"); return; }
    delete users[u];
    refreshUsers();
    refreshRoles();
}

// Rol listesi
function refreshRoles() {
    roleList.innerHTML = "";
    Object.keys(users).forEach(u => {
        roleList.innerHTML += `
            <div class="userBox">
                ${u} 
                <select onchange="changeRole('${u}', this.value)">
                    <option value="user" ${users[u].role==="user"?"selected":""}>User</option>
                    <option value="admin" ${users[u].role==="admin"?"selected":""}>Admin</option>
                </select>
            </div>
        `;
    });
}

function changeRole(user, role) {
    users[user].role = role;
    refreshUsers();
}

// Çıkış
function logout() {
    location.reload();
}

</script>

</body>
</html>
